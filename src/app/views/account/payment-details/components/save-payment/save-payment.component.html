<div class="card bg-transparent rounded-3">
  <!-- Card header -->
  <div
    class="card-header bg-transparent border-bottom d-sm-flex justify-content-between px-0 pt-0"
  >
    <h5 class="card-header-title mb-2 mb-sm-0">Saved payment methods</h5>
    <a
      href="javascript:void(0);"
      class="btn btn-primary mb-0"
      (click)="openModal(addcard)"
      ><i class="bi bi-plus-lg me-2"></i>Add new card</a
    >
  </div>
  <!-- Card body START -->
  <div class="card-body px-0 mt-3">
    <!-- Master card -->
    @for (payment of paymentMethods; track $index; let last = $last) {
      <div class="border rounded p-4" [ngClass]="{ 'mb-4': !last }">
        <div class="d-sm-flex align-items-center">
          <div class="flex-shrink-0 mb-2 mb-sm-0">
            <img class="avatar" [src]="payment.img" alt="Image Description" />
          </div>

          <div class="flex-grow-1 ms-sm-3">
            <div class="row align-items-center">
              <div class="col-sm mb-3 mb-sm-0">
                <p class="heading-color fw-normal mb-0">
                  {{ payment.type == 'visa' ? 'VisaCard' : 'MasterCard' }} ••••
                  {{ payment.number }}
                  @if (payment.isPrimary) {
                    <span class="badge text-bg-primary">primary</span>
                  }
                </p>
                <small class="text-muted"
                  >Checking - Expires {{ payment.expiry }}</small
                >
              </div>
              <!-- End Col -->

              <div class="col-sm-auto">
                <div class="d-flex gap-3">
                  <a class="btn btn-sm btn-white border mb-0">
                    <i class="bi-pencil-fill me-1"></i> Edit
                  </a>
                  <button
                    type="button"
                    class="btn btn-sm btn-white border mb-0"
                  >
                    <i class="bi-trash me-1"></i> Delete
                  </button>
                </div>
              </div>
              <!-- End Col -->
            </div>
            <!-- End Row -->
          </div>
        </div>
      </div>
    }
  </div>
  <!-- Card body END -->
</div>

<ng-template #addcard let-modal>
  <!-- Modal header -->
  <div class="modal-header px-4 d-flex justify-content-between">
    <h5 class="modal-title" id="addCardLabel">Add card</h5>
    <button
      type="button"
      class="btn btn-sm btn-light mb-0"
      (click)="modal.dismiss()"
      aria-label="Close"
    >
      <i class="bi bi-x-lg"></i>
    </button>
  </div>
  <!-- Modal body -->
  <div class="modal-body p-4">
    <form class="row g-4">
      <!-- Card number -->
      <div class="col-12">
        <label class="form-label">Card Number</label>
        <div class="position-relative">
          <input
            type="text"
            class="form-control"
            maxlength="16"
            placeholder="xxxx xxxx xxxx xxxx"
          />
          <img
            src="assets/images/elements/visa.svg"
            class="w-40px position-absolute top-50 end-0 translate-middle-y me-2"
            alt=""
          />
        </div>
      </div>
      <!-- Expiration Date -->
      <div class="col-md-6">
        <label class="form-label">Expiration date</label>
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            maxlength="2"
            placeholder="Month"
          />
          <input
            type="text"
            class="form-control"
            maxlength="4"
            placeholder="Year"
          />
        </div>
      </div>
      <!--Cvv code  -->
      <div class="col-md-6">
        <label class="form-label">CVV / CVC</label>
        <input
          type="number"
          class="form-control"
          maxlength="3"
          placeholder="xxx"
        />
      </div>
      <!-- Card name -->
      <div class="col-12">
        <label class="form-label">Name on Card</label>
        <input
          type="text"
          class="form-control"
          aria-label="name of card holder"
          placeholder="Name of card holder"
        />
      </div>
      <!-- Check box -->
      <div class="col-md-12">
        <div class="form-check mb-0">
          <input type="checkbox" class="form-check-input" id="exampleCheck1" />
          <label class="form-check-label" for="exampleCheck1"
            >Secuarely save card and details</label
          >
        </div>
      </div>
    </form>
  </div>
  <!-- Modal footer -->
  <div class="modal-footer px-4">
    <button
      type="button"
      class="btn btn-white border my-0"
      (click)="modal.dismiss()"
    >
      Close
    </button>
    <button
      type="button"
      class="btn btn-primary my-0"
      (click)="modal.dismiss()"
    >
      Save change
    </button>
  </div>
</ng-template>
